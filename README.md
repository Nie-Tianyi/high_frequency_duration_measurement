# 在运行前解压Data文件

```bash
# on Mac/Linux
unzip data.zip
```



# 固收策略大百科之七

久期测算 2.0 版，兼具高频与精准

## 一、前言

固定收益领域中，投资者面临的主要两个风险为：
- 利率风险
- 信用风险

久期（Duration）是债券的加权期限，其反映了收益的**平均等待时间**。 
久期是很衡量利率风险的核心指标，其反映了市场对利率风险的态度。
高频计算久期可以帮助投资者更精准得把握市场行情，投资者可以：
- 横向比较市场类似产品的久期（空间维度）
- 纵向比较该产品自己的历史久期（时间纬度）

因此高频又精准的测量久期是对投资者来说非常重要。
但是由于无法对基金内每一只债券进行日度持仓明细追踪，很难精确的计算基金的久期。
目前市场上常见的计算基金的久期的方法有：
- 重仓债券估算法：
  - 根据基金季报中列举的前五大重仓债券，根据其剩余期限及季末持有市值，计算得到加权平均久期，作为中长期纯债基金的近似替代。
  - 优点：较好的反映基金经历对久期的偏好
  - 缺点：
    - 1）低频：一年只能计算出4个值。
    - 2）滞后：每个数据都有两周的滞后
  - 更适合作为季频回溯参考
- 基金仓位估算法：
  - 利用日频更新的收益数据，结合中债指数各期限子段的收益序列，实现对债基久期的高频跟踪
    - 其核心思想是通过对基金的日度收益做期限拆解，从而大致得出基金不同期限品种的仓位。
  - 在实战中，我们使用**基金归因模型**，完成对基金收益的期限拆解

## 二、基金归因模型

由于是估算，根据**中债分段指数**，我们可以将基金组成部分粗略分解为成熟时间在1年内的债券，成熟时间在1～3年内的债券，...，成熟时间大于10年的债券。数学表示为：
$$ x_{<1y}, x_{1y-3y},..., x_{7y-10y}, x_{>10y} $$

归因模型使用线性回归，通过探测基金A的日度收益序列在不同因子序列上的暴露情况$\beta_i$，便可得到不同因子对于基金A的收益贡献水平。
而在得到各个期限子段的暴露值$\beta_i$后，我们可以将该系数作为不同期限资产的模糊仓位，进而得到债基在不同期限上的持仓水平。具体计算方法为：
1. 数据获取：获取中债分段指数的日度收益和久期数据。
2. 收益拆解：使用线性回归模型，将基金日度收益拆解为不同期限子段的收益贡献。
3. 仓位估算：根据回归系数，估算基金在不同期限债券上的仓位。
4. 久期计算：根据各期限子段的仓位和久期，计算基金的加权平均久期。

### 模型参数限制

$\beta_i$代表了在期限为i的债券上的仓位权重，理论上来说所有的$\beta_i$加起来应该是等于1的，但是：
- 如果基金中持有非债券资产（例如现金），那么所有的$\beta_i$加起来会小于1；
- 如果基金中加了杠杆，那么所有的$\beta_i$加起来会大于1；

由于实际国内债券市场的一些限制，例如做空难度大，于是我们对$\beta$加一些符合直觉的限制：
$$\beta_i > 0 且 \sum \beta_i < 1$$

同时连续的时间段数据相关性较高，因此我们引入正则项（LASSO Ridge 逐步回归）来减少线性回归过拟合的可能性。从最终结果来看，逐步回归是减少过拟合最有用的方法。在实际操作中，我们采用逐步向前回归法：

> 逐步向前回归法的原理是从空模型起步，率先选出对债基收益解释度最高的期限子段并加入已选池，剩余变量暂时归入备选池中；在后续的轮次当中，我们将备选池中的变量逐一与已选变量集做配合，共同去解释债基收益，并在每轮结束前选出解释效果边际提升最高且自身单变量解释度满足一定条件期限子段加入模型；直至所有变量已被选入，或是未有备选变量满足解释度条件时，便终止轮次，确定所需变量。

### 评判标准

我们引入“利率敏感性久期”作为评判标准，用公式$-D\times \Delta y = r$估算证券收益对利率的敏感性。

### 数据选择

我们排除一些基金，他们不在我们的研究对象内，因为：
- 排除“摊余成本法债基”：其收益锁定，无法拆解出具体持仓
- 排除“定开型债基”：杠杆率过高，无法准确计算出$\beta$；同时其披露收益频率低，一周一次，难以满足数据需求


## 三、针对模型做进一步优化

### 1. 仓位端
我们跟实际市场中的一些行为习惯，修改我们的模型限制，使其能更好的拟合显示的情况：
- 根据《资管新规》，总资产不能超过净资产的140%，于是我们把所有$\beta_i$之和调成1.4，即：$$\sum \beta_i < 1.4$$
- 由于相对考核机制，很少有基金会持有大量现金，因此我们把所有$\beta_i$之和的下线设为0.8，即：$$\sum \beta_i > 0.8$$

### 2. 配置端
0-3年期限债券是中长债基重要的底仓品种，因此在完成逐步回归法的变量筛选过后，我们会重新观察所选变量，若短久期的限子段（3年以内）被算法所剔除，则考虑将其回补至待估参数集合。

### 3. 滞后性
模型本质上是一个回归模型，模型对回归变量的时间序列长度具有一定要求：
- 更长的回归窗口可为模型提供更加充分的历史信息，使其准确把握债基的长期偏好
- 更短的回归窗口则可提升测算结果的时效性，但代价便是更嘈杂的噪声

我们发现40个交易日的滚动窗宽是稳定性与时效性的一个局部平衡点，40个交易日窗宽的模型侧重于反映久期的中枢水平， 将近2个月时长的回归窗宽在捕捉短期变化时会略显吃力。

一个改进思路：在稳定结果的基础上，根据最新信息做出修正。在实操上，一个可行的做法是在滚动窗口的结尾多次补充最新一周的数据，以增加近期信息的“话语权”。
> 我们可以在40个交易日窗宽的数据中，挑选出最新一周的数据（最后五个交易日数据），复制三次并补充在回归序列尾部，使得新旧信息之间的比例由原本的5：35提升至20:35。

### 4. 细分类

债券基金的持仓风格和投资策略差异较大，不同风格的基金在债券品种选择、久期调整和收益来源上可能存在显著差异。如果对所有基金使用统一的指数进行收益拆解，可能会导致测算结果不准确。

根据债基的持仓风格匹配相应的对标指数，或能提高收益拆解的准确性。

论文根据基金的持仓风格，将债券基金划分为以下三类：

- 利率债基：主要投资于利率债（如国债、政策性金融债、同业存单等），利率持仓超过70%。使用中债国开债指数族和存单指数族，因为这些指数更能反映利率债的收益特征。
- 信用债基：主要投资于信用债（如企业债、中票、短融、非政策性金融债等），信用持仓超过70%。使用二永指数族（二级资本债和永续债）和信用债指数族，因为这些指数更能反映信用债的收益特征。
- 均衡债基：持仓中利率债和信用债的比例相对均衡，或未明确披露持仓信息的基金。沿用中债新综合指数，因为其覆盖范围广，适合风格不明确的基金。



